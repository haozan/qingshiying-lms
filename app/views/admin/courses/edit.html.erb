<% content_for :title, "Edit Course" %>

<div class="container-md">
  <div class="flex items-center space-x-4">
    <%= link_to admin_courses_path, class: "btn-ghost text-sm py-1 px-3" do %>
      <%= lucide_icon "arrow-left", class: "w-4 h-4 mr-2" %>
      Back to Courses
    <% end %>
  </div>

  <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-50 mt-4 mb-8">Edit Course</h1>

  <!-- Form -->
  <div class="card bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700">
    <div class="card-body">
      <%= form_with model: [:admin, @course], local: true, class: "space-y-6" do |form| %>
        <!-- Name -->
        <div class="form-group">
          <%= form.label :name %>
          <%= form.text_field :name, placeholder: "Enter name..." %>
        </div>

        <!-- Slug -->
        <div class="form-group">
          <%= form.label :slug %>
          <%= form.text_field :slug, placeholder: "Enter slug..." %>
        </div>

        <!-- Description -->
        <div class="form-group">
          <%= form.label :description %>
          <%= form.text_area :description, rows: 5, placeholder: "Enter description..." %>
        </div>



        <!-- Status -->
        <div class="form-group">
          <%= form.label :status %>
          <%= form.text_field :status, placeholder: "Enter status..." %>
        </div>

        <!-- Position -->
        <div class="form-group">
          <%= form.label :position %>
          <%= form.number_field :position, placeholder: "Enter position..." %>
        </div>

        <!-- 三档价格系统 -->
        <div class="border-t border-gray-200 dark:border-gray-700 pt-6 mt-6">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50 mb-4">三档价格系统</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">设置课程的三个价格档位，前端会自动突出显示早鸟价</p>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- 原价 -->
            <div class="form-group">
              <%= form.label :original_price, "原价 (¥)" %>
              <%= form.number_field :original_price, step: 0.01, placeholder: "3999.00" %>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">显示为删除线</p>
            </div>

            <!-- 现价 -->
            <div class="form-group">
              <%= form.label :current_price, "现价 (¥)" %>
              <%= form.number_field :current_price, step: 0.01, placeholder: "2999.00" %>
              <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">中等字号显示</p>
            </div>

            <!-- 早鸟价 -->
            <div class="form-group">
              <%= form.label :early_bird_price, "早鸟价 (¥)" %>
              <%= form.number_field :early_bird_price, step: 0.01, placeholder: "1999.00", class: "border-yellow-300 dark:border-yellow-700" %>
              <p class="text-xs text-yellow-600 dark:text-yellow-400 mt-1 font-semibold">✨ 最突出显示（黄色大字）</p>
            </div>
          </div>
        </div>

        <!-- 旧版价格字段 -->
        <div class="border-t border-gray-200 dark:border-gray-700 pt-6 mt-6">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-50 mb-4">旧版价格字段</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">用于订阅制/买断制的基础价格，建议与早鸟价保持一致</p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Annual price -->
            <div class="form-group">
              <%= form.label :annual_price, "订阅制年价 (¥)" %>
              <%= form.number_field :annual_price, step: 0.01, placeholder: "1999.00" %>
            </div>


          </div>
        </div>

        <!-- Form Actions -->
        <div class="flex justify-end space-x-3">
          <%= link_to admin_course_path(@course.id), class: "btn-ghost" do %>
            Cancel
          <% end %>
          <%= form.submit "Update Course", class: "btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
