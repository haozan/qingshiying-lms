# ä¸‰æ¡£ä»·æ ¼ç³»ç»Ÿæ›´æ–°è¯´æ˜

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ•°æ®åº“è¿ç§»
å·²æ·»åŠ ä¸‰ä¸ªæ–°çš„ä»·æ ¼å­—æ®µåˆ° `courses` è¡¨ï¼š
- `original_price` - åŸä»·
- `current_price` - ç°ä»·
- `early_bird_price` - æ—©é¸Ÿä»·

### 2. Seeds æ–‡ä»¶æ›´æ–°
`db/seeds.rb` å·²æ›´æ–°ï¼ŒåŒ…å«æ–°çš„ä¸‰æ¡£ä»·æ ¼ï¼š

| è¯¾ç¨‹ | åŸä»· | ç°ä»· | æ—©é¸Ÿä»· |
|------|------|------|--------|
| AIè¯¾ç¨‹ | Â¥3,999 | Â¥2,999 | Â¥1,999 |
| å†™ä½œè¿è¥è¯¾ | Â¥5,999 | Â¥3,999 | Â¥2,999 |
| AIç¼–ç¨‹è¯¾ | Â¥19,999 | Â¥7,999 | Â¥6,999 |

### 3. è§†å›¾æ›´æ–°
è¯¾ç¨‹è¯¦æƒ…é¡µ (`app/views/courses/show.html.erb`) å·²æ›´æ–°ï¼Œæ˜¾ç¤ºä¸‰æ¡£ä»·æ ¼ï¼š
- åŸä»·ï¼šåˆ é™¤çº¿æ˜¾ç¤º
- ç°ä»·ï¼šä¸­ç­‰å­—å·æ˜¾ç¤º
- æ—©é¸Ÿä»·ï¼š**æœ€å¤§æœ€çªå‡º**çš„é»„è‰²æ˜¾ç¤ºï¼ˆå¸¦é—ªç”µå›¾æ ‡ï¼‰

### 4. è¾…åŠ©æ–¹æ³•æ›´æ–°
`app/helpers/application_helper.rb` ä¸­çš„ `format_course_price` æ–¹æ³•å·²æ›´æ–°ï¼Œä¼˜å…ˆæ˜¾ç¤ºæ—©é¸Ÿä»·ã€‚

### 5. æµ‹è¯•é€šè¿‡
æ‰€æœ‰æµ‹è¯•ï¼ˆ29ä¸ªï¼‰å…¨éƒ¨é€šè¿‡ âœ…

## ğŸš€ éƒ¨ç½²çŠ¶æ€

å·²æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼š**https://qinglion.ai**

## âš ï¸ é‡è¦ï¼šè¿˜éœ€è¦æ‰§è¡Œä¸€æ­¥

ç”±äºç”Ÿäº§ç¯å¢ƒçš„è¯¾ç¨‹æ•°æ®å·²ç»å­˜åœ¨ï¼Œéœ€è¦è¿è¡Œä¸€æ¬¡æ€§æ›´æ–°è„šæœ¬æ¥è®¾ç½®æ–°çš„ä»·æ ¼å­—æ®µã€‚

### è¿è¡Œæ›´æ–°è„šæœ¬

åœ¨ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
RAILS_ENV=production rails courses:update_prices
```

æˆ–è€…ä½¿ç”¨ `rails runner` ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œï¼š

```bash
RAILS_ENV=production rails runner "
  Course.find_by(slug: 'aikecheng')&.update!(
    original_price: 3999.00,
    current_price: 2999.00,
    early_bird_price: 1999.00,
    annual_price: 1999.00
  )
  
  Course.find_by(slug: 'xiezuoyunyingke')&.update!(
    original_price: 5999.00,
    current_price: 3999.00,
    early_bird_price: 2999.00,
    buyout_price: 2999.00
  )
  
  Course.find_by(slug: 'aibianchengke')&.update!(
    original_price: 19999.00,
    current_price: 7999.00,
    early_bird_price: 6999.00,
    annual_price: 6999.00
  )
  
  puts 'Price update completed!'
"
```

### éªŒè¯æ›´æ–°

æ›´æ–°åï¼Œè®¿é—®è¯¾ç¨‹é¡µé¢åº”è¯¥èƒ½çœ‹åˆ°ï¼š
1. åŸä»·æ˜¾ç¤ºä¸ºåˆ é™¤çº¿
2. ç°ä»·æ˜¾ç¤ºä¸ºä¸­ç­‰å­—å·
3. **æ—©é¸Ÿä»·æ˜¾ç¤ºä¸ºæœ€å¤§æœ€çªå‡ºçš„é»„è‰²ä»·æ ¼**

## ğŸ“‹ ä»·æ ¼ä½“ç³»è¯´æ˜

### æ˜¾ç¤ºé€»è¾‘
- å¦‚æœè¯¾ç¨‹æœ‰ `early_bird_price`ï¼Œé¡µé¢ä¼šæ˜¾ç¤ºä¸‰æ¡£ä»·æ ¼
- æ—©é¸Ÿä»·æ˜¯**æœ€çªå‡ºçš„ä¸»ä»·æ ¼**ï¼ˆ4xl å­—å· + é»„è‰² + é—ªç”µå›¾æ ‡ï¼‰
- ç”¨æˆ·æœ€ç»ˆæ”¯ä»˜çš„æ˜¯**æ—©é¸Ÿä»·**ï¼ˆ`annual_price` æˆ– `buyout_price` ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºæ—©é¸Ÿä»·ï¼‰

### å…¼å®¹æ€§
- æ—§çš„åŒä»·æ ¼æ¨¡å¼ï¼ˆ`buyout_price` > `annual_price`ï¼‰ä»ç„¶å…¼å®¹
- å¦‚æœæ²¡æœ‰è®¾ç½®ä¸‰æ¡£ä»·æ ¼ï¼Œä¼šå›é€€åˆ°æ—§ç‰ˆæ˜¾ç¤º

## ğŸ”’ æœªæ¥ä¿®æ”¹ä»·æ ¼

### æ–¹å¼ä¸€ï¼šé€šè¿‡ç®¡ç†åå°
åœ¨ç®¡ç†åå°ç›´æ¥ä¿®æ”¹è¯¾ç¨‹çš„ä¸‰ä¸ªä»·æ ¼å­—æ®µã€‚

### æ–¹å¼äºŒï¼šé€šè¿‡ Rails Runner
```bash
RAILS_ENV=production rails runner "
  course = Course.find_by(slug: 'aikecheng')
  course.update!(
    original_price: æ–°çš„åŸä»·,
    current_price: æ–°çš„ç°ä»·,
    early_bird_price: æ–°çš„æ—©é¸Ÿä»·,
    annual_price: æ–°çš„æ—©é¸Ÿä»·  # ç¡®ä¿æ”¯ä»˜ä»·æ ¼ç­‰äºæ—©é¸Ÿä»·
  )
"
```

### æ–¹å¼ä¸‰ï¼šä¿®æ”¹ seeds.rb
ä¿®æ”¹ `db/seeds.rb` ä¸­çš„é»˜è®¤ä»·æ ¼ï¼ˆä»…å½±å“æ–°åˆ›å»ºçš„è¯¾ç¨‹ï¼‰ã€‚

## ğŸ“ ç›¸å…³æ–‡ä»¶

- `db/migrate/20260123025931_add_three_tier_pricing_to_courses.rb` - æ•°æ®åº“è¿ç§»
- `db/seeds.rb` - Seeds æ–‡ä»¶ï¼ˆåŒ…å«ä¸‰æ¡£ä»·æ ¼ï¼‰
- `lib/tasks/update_course_prices.rake` - ä¸€æ¬¡æ€§æ›´æ–°è„šæœ¬
- `app/views/courses/show.html.erb` - è¯¾ç¨‹è¯¦æƒ…é¡µé¢
- `app/helpers/application_helper.rb` - è¾…åŠ©æ–¹æ³•
- `docs/seeds_fix.md` - Seeds ä¿®å¤è¯´æ˜ï¼ˆé˜²æ­¢ä»·æ ¼è¢«è¦†ç›–ï¼‰

## ğŸ¯ æ€»ç»“

ç³»ç»Ÿå·²å®Œæˆä¸‰æ¡£ä»·æ ¼åŠŸèƒ½çš„å¼€å‘å’Œéƒ¨ç½²ï¼Œç°åœ¨åªéœ€è¦è¿è¡Œä¸€æ¬¡æ€§è„šæœ¬æ›´æ–°ç”Ÿäº§ç¯å¢ƒçš„ä»·æ ¼æ•°æ®ï¼Œå³å¯ç«‹å³ç”Ÿæ•ˆï¼âœ¨
